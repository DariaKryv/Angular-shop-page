<p>shoe-gallery works!</p>
<h1>Products</h1>

<!-- <div class="mb-4"> -->
<div class="form-container">
  <input type="text" placeholder="Name" [(ngModel)]="newProduct.name" />
  <input type="number" placeholder="Price" [(ngModel)]="newProduct.price" />
  <input type="text" placeholder="Description" [(ngModel)]="newProduct.description" />
  <input type="text" placeholder="Image URL" [(ngModel)]="newProduct.image_url" />
  <button class="btn-primary" (click)="addProduct()">Add Product</button>
</div>

<!-- <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 16px"> -->
<div class="product-grid">
  <!-- <div
    *ngFor="let p of products()"
    style="border: 1px solid #ccc; padding: 10px; border-radius: 8px"
  > -->
  <div class="product-card" *ngFor="let p of products()">
    <!-- Edit mode -->
    <ng-container *ngIf="editingProduct?.id === p.id; else viewMode">
      <input [(ngModel)]="editingProduct!.name" placeholder="Name" />
      <input type="number" [(ngModel)]="editingProduct!.price" placeholder="Price" />
      <input [(ngModel)]="editingProduct!.description" placeholder="Description" />
      <input [(ngModel)]="editingProduct!.image_url" placeholder="Image URL" />
      <button (click)="saveEdit()">üíæ Save</button>
      <button (click)="editingProduct = null">‚úñ Cancel</button>
    </ng-container>

    <ng-template #viewMode>
      <h3>{{ p.name }}</h3>
      <p>${{ p.price }}</p>
      <p>{{ p.description }}</p>
      <img *ngIf="p.image_url" [src]="p.image_url" alt="{{ p.name }}" class="product-img" />
      <!-- <button (click)="editingProduct = { ...p }">‚úè Edit</button> -->
      <button class="btn-edit" (click)="startEdit(p)">Edit</button>
      <button class="btn-delete" (click)="deleteProduct(p.id!)">Delete</button>
    </ng-template>
  </div>
</div>
<ng-template #loadingTpl>
  <p>Loading products...</p>
</ng-template>
